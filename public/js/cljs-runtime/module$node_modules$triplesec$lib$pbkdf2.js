shadow$provide.module$node_modules$triplesec$lib$pbkdf2=function(global,process,require,module,exports,shadow$shims){(function(){var iced=require("module$node_modules$iced_runtime$lib$main");var HMAC=require("module$node_modules$triplesec$lib$hmac").HMAC;var WordArray=require("module$node_modules$triplesec$lib$wordarray").WordArray;var util=require("module$node_modules$triplesec$lib$util");var PBKDF2=function(){function PBKDF2(_arg){this.klass=_arg.klass;(this.c=_arg.c)||(this.c=1024);this.klass||
(this.klass=HMAC)}PBKDF2.prototype._PRF=function(input){this.prf.reset();return this.prf.finalize(input)};PBKDF2.prototype._gen_T_i=function(_arg,cb){var stop,__iced_deferrals;var ___iced_passed_deferral=iced.findDeferral(arguments);var salt=_arg.salt;var i=_arg.i;var progress_hook=_arg.progress_hook;progress_hook(0);salt=salt.clone().concat(new WordArray([i]));var U=this._PRF(salt);var ret=U.clone();i=1;(function(_this){return function(__iced_k$jscomp$1){var _while=function(__iced_k$jscomp$0){var _next=
function(){return iced.trampoline(function(){return _while(__iced_k$jscomp$0)})};if(i<_this.c){for(stop=Math.min(_this.c,i+128);i<stop;)U=_this._PRF(U),ret.xor(U,{}),i++;progress_hook(i);(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:"/Users/max/src/keybase/triplesec/src/pbkdf2.iced",funcname:"PBKDF2._gen_T_i"});util.default_delay(0,0,__iced_deferrals.defer({lineno:57}));__iced_deferrals._fulfill()})(function(){return _next(null)})}else return __iced_k$jscomp$0()};
_while(__iced_k$jscomp$1)}})(this)(function(_this){return function(){progress_hook(i);return cb(ret)}}(this))};PBKDF2.prototype.run=function(_arg,cb){var flat,i,tmp,__iced_deferrals,_end,_positive;var ___iced_passed_deferral=iced.findDeferral(arguments);var key=_arg.key;var salt=_arg.salt;var dkLen=_arg.dkLen;var progress_hook=_arg.progress_hook;this.prf=new this.klass(key);var bs=this.prf.get_output_size();var n=Math.ceil(dkLen/bs);var words=[];var ph=function(_this){return function(block){return function(iter){return"function"===
typeof progress_hook?progress_hook({what:"pbkdf2",total:n*_this.c,i:block*_this.c+iter}):void 0}}}(this);ph(0)(0);(function(_this){return function(__iced_k$jscomp$1){i=1;_end=n;_positive=1<_end;var _while=function(__iced_k$jscomp$0){var _next=function(){return iced.trampoline(function(){i=_positive?i+1:i-1;return _while(__iced_k$jscomp$0)})};if(!0===_positive&&i>n||!1===_positive&&i<n)return __iced_k$jscomp$0();(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,
filename:"/Users/max/src/keybase/triplesec/src/pbkdf2.iced",funcname:"PBKDF2.run"});_this._gen_T_i({salt:salt,i:i,progress_hook:ph(i-1)},__iced_deferrals.defer({assign_fn:function(){return function(JSCompiler_OptimizeArgumentsArray_p8){return tmp=JSCompiler_OptimizeArgumentsArray_p8}}(),lineno:80}));__iced_deferrals._fulfill()})(function(){return _next(words.push(tmp.words))})};_while(__iced_k$jscomp$1)}})(this)(function(_this){return function(){var _ref;ph(n)(0);flat=(_ref=[]).concat.apply(_ref,
words);key.scrub();_this.prf.scrub();_this.prf=null;return cb(new WordArray(flat,dkLen))}}(this))};return PBKDF2}();exports.pbkdf2=function(_arg,cb){var out,__iced_deferrals;var ___iced_passed_deferral=iced.findDeferral(arguments);var key=_arg.key;var salt=_arg.salt;var klass=_arg.klass;var c=_arg.c;var dkLen=_arg.dkLen;var progress_hook=_arg.progress_hook;var eng=new PBKDF2({klass:klass,c:c});(function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,
filename:"/Users/max/src/keybase/triplesec/src/pbkdf2.iced"});eng.run({key:key,salt:salt,dkLen:dkLen,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(JSCompiler_OptimizeArgumentsArray_p9){return out=JSCompiler_OptimizeArgumentsArray_p9}}(),lineno:106}));__iced_deferrals._fulfill()}})(this)(function(_this){return function(){return cb(out)}}(this))};exports.PBKDF2=PBKDF2}).call(this)}
//# sourceMappingURL=module$node_modules$triplesec$lib$pbkdf2.js.map
