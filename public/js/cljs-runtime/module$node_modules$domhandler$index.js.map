{
"version":3,
"file":"module$node_modules$domhandler$index.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/domhandler/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$domhandler$index\"] = function(global,process,require,module,exports,shadow$shims) {\nvar ElementType = require(\"domelementtype\");\n\nvar re_whitespace = /\\s+/g;\nvar NodePrototype = require(\"./lib/node\");\nvar ElementPrototype = require(\"./lib/element\");\n\nfunction DomHandler(callback, options, elementCB){\n\tif(typeof callback === \"object\"){\n\t\telementCB = options;\n\t\toptions = callback;\n\t\tcallback = null;\n\t} else if(typeof options === \"function\"){\n\t\telementCB = options;\n\t\toptions = defaultOpts;\n\t}\n\tthis._callback = callback;\n\tthis._options = options || defaultOpts;\n\tthis._elementCB = elementCB;\n\tthis.dom = [];\n\tthis._done = false;\n\tthis._tagStack = [];\n\tthis._parser = this._parser || null;\n}\n\n//default options\nvar defaultOpts = {\n\tnormalizeWhitespace: false, //Replace all whitespace with single spaces\n\twithStartIndices: false, //Add startIndex properties to nodes\n\twithEndIndices: false, //Add endIndex properties to nodes\n};\n\nDomHandler.prototype.onparserinit = function(parser){\n\tthis._parser = parser;\n};\n\n//Resets the handler back to starting state\nDomHandler.prototype.onreset = function(){\n\tDomHandler.call(this, this._callback, this._options, this._elementCB);\n};\n\n//Signals the handler that parsing is done\nDomHandler.prototype.onend = function(){\n\tif(this._done) return;\n\tthis._done = true;\n\tthis._parser = null;\n\tthis._handleCallback(null);\n};\n\nDomHandler.prototype._handleCallback =\nDomHandler.prototype.onerror = function(error){\n\tif(typeof this._callback === \"function\"){\n\t\tthis._callback(error, this.dom);\n\t} else {\n\t\tif(error) throw error;\n\t}\n};\n\nDomHandler.prototype.onclosetag = function(){\n\t//if(this._tagStack.pop().name !== name) this._handleCallback(Error(\"Tagname didn't match!\"));\n\t\n\tvar elem = this._tagStack.pop();\n\n\tif(this._options.withEndIndices && elem){\n\t\telem.endIndex = this._parser.endIndex;\n\t}\n\n\tif(this._elementCB) this._elementCB(elem);\n};\n\nDomHandler.prototype._createDomElement = function(properties){\n\tif (!this._options.withDomLvl1) return properties;\n\n\tvar element;\n\tif (properties.type === \"tag\") {\n\t\telement = Object.create(ElementPrototype);\n\t} else {\n\t\telement = Object.create(NodePrototype);\n\t}\n\n\tfor (var key in properties) {\n\t\tif (properties.hasOwnProperty(key)) {\n\t\t\telement[key] = properties[key];\n\t\t}\n\t}\n\n\treturn element;\n};\n\nDomHandler.prototype._addDomElement = function(element){\n\tvar parent = this._tagStack[this._tagStack.length - 1];\n\tvar siblings = parent ? parent.children : this.dom;\n\tvar previousSibling = siblings[siblings.length - 1];\n\n\telement.next = null;\n\n\tif(this._options.withStartIndices){\n\t\telement.startIndex = this._parser.startIndex;\n\t}\n\tif(this._options.withEndIndices){\n\t\telement.endIndex = this._parser.endIndex;\n\t}\n\n\tif(previousSibling){\n\t\telement.prev = previousSibling;\n\t\tpreviousSibling.next = element;\n\t} else {\n\t\telement.prev = null;\n\t}\n\n\tsiblings.push(element);\n\telement.parent = parent || null;\n};\n\nDomHandler.prototype.onopentag = function(name, attribs){\n\tvar properties = {\n\t\ttype: name === \"script\" ? ElementType.Script : name === \"style\" ? ElementType.Style : ElementType.Tag,\n\t\tname: name,\n\t\tattribs: attribs,\n\t\tchildren: []\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.ontext = function(data){\n\t//the ignoreWhitespace is officially dropped, but for now,\n\t//it's an alias for normalizeWhitespace\n\tvar normalize = this._options.normalizeWhitespace || this._options.ignoreWhitespace;\n\n\tvar lastTag;\n\n\tif(!this._tagStack.length && this.dom.length && (lastTag = this.dom[this.dom.length-1]).type === ElementType.Text){\n\t\tif(normalize){\n\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t} else {\n\t\t\tlastTag.data += data;\n\t\t}\n\t} else {\n\t\tif(\n\t\t\tthis._tagStack.length &&\n\t\t\t(lastTag = this._tagStack[this._tagStack.length - 1]) &&\n\t\t\t(lastTag = lastTag.children[lastTag.children.length - 1]) &&\n\t\t\tlastTag.type === ElementType.Text\n\t\t){\n\t\t\tif(normalize){\n\t\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t\t} else {\n\t\t\t\tlastTag.data += data;\n\t\t\t}\n\t\t} else {\n\t\t\tif(normalize){\n\t\t\t\tdata = data.replace(re_whitespace, \" \");\n\t\t\t}\n\n\t\t\tvar element = this._createDomElement({\n\t\t\t\tdata: data,\n\t\t\t\ttype: ElementType.Text\n\t\t\t});\n\n\t\t\tthis._addDomElement(element);\n\t\t}\n\t}\n};\n\nDomHandler.prototype.oncomment = function(data){\n\tvar lastTag = this._tagStack[this._tagStack.length - 1];\n\n\tif(lastTag && lastTag.type === ElementType.Comment){\n\t\tlastTag.data += data;\n\t\treturn;\n\t}\n\n\tvar properties = {\n\t\tdata: data,\n\t\ttype: ElementType.Comment\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncdatastart = function(){\n\tvar properties = {\n\t\tchildren: [{\n\t\t\tdata: \"\",\n\t\t\ttype: ElementType.Text\n\t\t}],\n\t\ttype: ElementType.CDATA\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncommentend = DomHandler.prototype.oncdataend = function(){\n\tthis._tagStack.pop();\n};\n\nDomHandler.prototype.onprocessinginstruction = function(name, data){\n\tvar element = this._createDomElement({\n\t\tname: name,\n\t\tdata: data,\n\t\ttype: ElementType.Directive\n\t});\n\n\tthis._addDomElement(element);\n};\n\nmodule.exports = DomHandler;\n\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","DomHandler","callback","options","elementCB","defaultOpts","_callback","_options","_elementCB","dom","_done","_tagStack","_parser","ElementType","re_whitespace","NodePrototype","ElementPrototype","normalizeWhitespace","withStartIndices","withEndIndices","prototype","onparserinit","DomHandler.prototype.onparserinit","parser","onreset","DomHandler.prototype.onreset","call","onend","DomHandler.prototype.onend","_handleCallback","onerror","DomHandler.prototype.onerror","error","onclosetag","DomHandler.prototype.onclosetag","elem","pop","endIndex","_createDomElement","DomHandler.prototype._createDomElement","properties","withDomLvl1","element","type","Object","create","key","hasOwnProperty","_addDomElement","DomHandler.prototype._addDomElement","parent","length","siblings","children","previousSibling","next","startIndex","prev","push","onopentag","DomHandler.prototype.onopentag","name","attribs","Script","Style","Tag","ontext","DomHandler.prototype.ontext","data","normalize","ignoreWhitespace","lastTag","Text","replace","oncomment","DomHandler.prototype.oncomment","Comment","oncdatastart","DomHandler.prototype.oncdatastart","CDATA","oncommentend","oncdataend","DomHandler.prototype.oncdataend","onprocessinginstruction","DomHandler.prototype.onprocessinginstruction","Directive"]
}
