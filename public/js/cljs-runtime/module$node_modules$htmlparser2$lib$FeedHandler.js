shadow$provide.module$node_modules$htmlparser2$lib$FeedHandler=function(global,process,require,module,exports,shadow$shims){function FeedHandler(callback,options){this.init(callback,options)}function fetch(what,where,recurse){return DomUtils.getText(DomUtils.getElementsByTagName(what,where,recurse,1)).trim()}function addConditionally(obj,prop,what,where,recurse){(what=fetch(what,where,recurse))&&(obj[prop]=what)}global=require("module$node_modules$htmlparser2$lib$index");var DomHandler=global.DomHandler,
DomUtils=global.DomUtils;require("module$node_modules$inherits$inherits_browser")(FeedHandler,DomHandler);FeedHandler.prototype.init=DomHandler;var isValidFeed=function(value){return"rss"===value||"feed"===value||"rdf:RDF"===value};FeedHandler.prototype.onend=function(){var feed={},feedRoot=DomUtils.getElementsByTagName(isValidFeed,this.dom,!0,1)[0],tmp$jscomp$0;if(feedRoot)if("feed"===feedRoot.name){var childs=feedRoot.children;feed.type="atom";addConditionally(feed,"id","id",childs);addConditionally(feed,
"title","title",childs);(tmp$jscomp$0=DomUtils.getElementsByTagName("link",childs,!0,1)[0])&&(tmp$jscomp$0=tmp$jscomp$0.attribs)&&(tmp$jscomp$0=tmp$jscomp$0.href)&&(feed.link=tmp$jscomp$0);addConditionally(feed,"description","subtitle",childs);if(tmp$jscomp$0=fetch("updated",childs))feed.updated=new Date(tmp$jscomp$0);addConditionally(feed,"author","email",childs,!0);feed.items=DomUtils.getElementsByTagName("entry",childs,!0).map(function(item){var entry={},tmp;item=item.children;addConditionally(entry,
"id","id",item);addConditionally(entry,"title","title",item);(tmp=DomUtils.getElementsByTagName("link",item,!0,1)[0])&&(tmp=tmp.attribs)&&(tmp=tmp.href)&&(entry.link=tmp);if(tmp=fetch("summary",item)||fetch("content",item))entry.description=tmp;if(tmp=fetch("updated",item))entry.pubDate=new Date(tmp);return entry})}else{childs=DomUtils.getElementsByTagName("channel",feedRoot.children,!0,1)[0].children;feed.type=feedRoot.name.substr(0,3);feed.id="";addConditionally(feed,"title","title",childs);addConditionally(feed,
"link","link",childs);addConditionally(feed,"description","description",childs);if(tmp$jscomp$0=fetch("lastBuildDate",childs))feed.updated=new Date(tmp$jscomp$0);addConditionally(feed,"author","managingEditor",childs,!0);feed.items=DomUtils.getElementsByTagName("item",feedRoot.children,!0).map(function(item){var entry={};item=item.children;addConditionally(entry,"id","guid",item);addConditionally(entry,"title","title",item);addConditionally(entry,"link","link",item);addConditionally(entry,"description",
"description",item);if(item=fetch("pubDate",item))entry.pubDate=new Date(item);return entry})}this.dom=feed;DomHandler.prototype._handleCallback.call(this,feedRoot?null:Error("couldn't find root of feed"))};module.exports=FeedHandler}
//# sourceMappingURL=module$node_modules$htmlparser2$lib$FeedHandler.js.map
