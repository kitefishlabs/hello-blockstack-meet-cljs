{"version":3,"sources":["cljs/core/async/impl/protocols.cljs"],"sourcesContent":[";;   Copyright (c) Rich Hickey and contributors. All rights reserved.\n;;   The use and distribution terms for this software are covered by the\n;;   Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)\n;;   which can be found in the file epl-v10.html at the root of this distribution.\n;;   By using this software in any fashion, you are agreeing to be bound by\n;;   the terms of this license.\n;;   You must not remove this notice, or any other, from this software.\n\n(ns cljs.core.async.impl.protocols)\n\n(def ^:const MAX-QUEUE-SIZE 1024)\n\n(defprotocol ReadPort\n  (take! [port fn1-handler] \"derefable val if taken, nil if take was enqueued\"))\n\n(defprotocol WritePort\n  (put! [port val fn1-handler] \"derefable boolean (false if already closed) if handled, nil if put was enqueued.\n                               Must throw on nil val.\"))\n\n(defprotocol Channel\n  (close! [chan])\n  (closed? [chan]))\n\n(defprotocol Handler\n  (active? [h] \"returns true if has callback. Must work w/o lock\")\n  (blockable? [h] \"returns true if this handler may be blocked, otherwise it must not block\")\n  #_(lock-id [h] \"a unique id for lock acquisition order, 0 if no lock\")\n  (commit [h] \"commit to fulfilling its end of the transfer, returns cb. Must be called within lock\"))\n\n(defprotocol Buffer\n  (full? [b] \"returns true if buffer cannot accept put\")\n  (remove! [b] \"remove and return next item from buffer, called under chan mutex\")\n  (add!* [b itm] \"if room, add item to the buffer, returns b, called under chan mutex\")\n  (close-buf! [b] \"called on chan closed under chan mutex, return ignored\"))\n\n(defn add!\n  ([b] b)\n  ([b itm]\n     (assert (not (nil? itm)))\n     (add!* b itm)))\n\n;; Defines a buffer that will never block (return true to full?)\n(defprotocol UnblockingBuffer)\n"],"mappings":"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","names":["cljs.core.async.impl.protocols/MAX-QUEUE-SIZE","cljs.core.async.impl.protocols/take!","goog/typeOf","x__4347__auto__","m__4348__auto__","cljs.core/missing-protocol","cljs.core.async.impl.protocols/ReadPort","port","fn1-handler","cljs.core.async.impl.protocols/put!","cljs.core.async.impl.protocols/WritePort","val","cljs.core.async.impl.protocols/close!","cljs.core.async.impl.protocols/closed?","cljs.core.async.impl.protocols/Channel","chan","cljs.core.async.impl.protocols/active?","cljs.core.async.impl.protocols/blockable?","cljs.core.async.impl.protocols/commit","cljs.core.async.impl.protocols/Handler","h","cljs.core.async.impl.protocols/full?","cljs.core.async.impl.protocols/remove!","cljs.core.async.impl.protocols/add!*","cljs.core.async.impl.protocols/close-buf!","cljs.core.async.impl.protocols/Buffer","b","itm","G__17390","cljs.core.async.impl.protocols/add!","js/Error","cljs.core.async.impl.protocols/UnblockingBuffer"]}