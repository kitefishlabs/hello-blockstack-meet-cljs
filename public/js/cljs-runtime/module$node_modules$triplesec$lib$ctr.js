shadow$provide.module$node_modules$triplesec$lib$ctr=function(global,process,require,module,exports,shadow$shims){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};var iced=require("module$node_modules$iced_runtime$lib$main");var WordArray=require("module$node_modules$triplesec$lib$wordarray").WordArray;
var StreamCipher=require("module$node_modules$triplesec$lib$algbase").StreamCipher;var Counter$jscomp$0=function(){function Counter(_arg){var value=_arg.value;_arg=_arg.len;if(null!=value)_arg=value.clone();else{null==_arg?_arg=2:void 0;var _results=[];for(value=0;0<=_arg?value<_arg:value>_arg;0<=_arg?++value:--value)_results.push(0);_arg=new WordArray(_results)}this._value=_arg}Counter.prototype.WORD_MAX=4294967295;Counter.prototype.inc=function(){var i;var go=!0;for(i=this._value.words.length-1;go&&
0<=i;)++this._value.words[i]>Counter.WORD_MAX?this._value.words[i]=0:go=!1,i--;return this};Counter.prototype.inc_le=function(){var i;var go=!0;for(i=0;go&&i<this._value.words.length;)++this._value.words[i]>Counter.WORD_MAX?this._value.words[i]=0:go=!1,i++;return this};Counter.prototype.get=function(){return this._value};Counter.prototype.copy=function(){return this._value.clone()};return Counter}();var Cipher$jscomp$0=function(_super){function Cipher(_arg){this.block_cipher=_arg.block_cipher;this.iv=
_arg.iv;Cipher.__super__.constructor.call(this);this.bsiw=this.block_cipher.blockSize/4;if(this.iv.sigBytes!==this.block_cipher.blockSize)throw Error("IV is wrong length ("+this.iv.sigBytes+")");this.ctr=new Counter$jscomp$0({value:this.iv})}__extends(Cipher,_super);Cipher.prototype.scrub=function(){return this.block_cipher.scrub()};Cipher.prototype.get_pad=function(){var pad=this.ctr.copy();this.ctr.inc();this.block_cipher.encryptBlock(pad.words);return pad};return Cipher}(StreamCipher);exports.Counter=
Counter$jscomp$0;exports.Cipher=Cipher$jscomp$0;exports.encrypt=function(_arg){var block_cipher=_arg.block_cipher;var iv=_arg.iv;_arg=_arg.input;block_cipher=new Cipher$jscomp$0({block_cipher:block_cipher,iv:iv});_arg=block_cipher.encrypt(_arg);block_cipher.scrub();return _arg};exports.bulk_encrypt=function(_arg,cb){var ret,__iced_deferrals;var ___iced_passed_deferral=iced.findDeferral(arguments);var block_cipher=_arg.block_cipher;var iv=_arg.iv;var input=_arg.input;var progress_hook=_arg.progress_hook;
var what=_arg.what;var cipher=new Cipher$jscomp$0({block_cipher:block_cipher,iv:iv});(function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:"/Users/max/src/keybase/triplesec/src/ctr.iced"});cipher.bulk_encrypt({input:input,progress_hook:progress_hook,what:what},__iced_deferrals.defer({assign_fn:function(){return function(JSCompiler_OptimizeArgumentsArray_p5){return ret=JSCompiler_OptimizeArgumentsArray_p5}}(),lineno:121}));
__iced_deferrals._fulfill()}})(this)(function(_this){return function(){return cb(ret)}}(this))}}).call(this)}
//# sourceMappingURL=module$node_modules$triplesec$lib$ctr.js.map
