{
"version":3,
"file":"module$node_modules$blockstack$lib$utils.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/blockstack/lib/utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$blockstack$lib$utils\"] = function(global,process,require,module,exports,shadow$shims) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BLOCKSTACK_HANDLER = undefined;\nexports.nextYear = nextYear;\nexports.nextMonth = nextMonth;\nexports.nextHour = nextHour;\nexports.updateQueryStringParameter = updateQueryStringParameter;\nexports.isLaterVersion = isLaterVersion;\nexports.hexStringToECPair = hexStringToECPair;\nexports.ecPairToHexString = ecPairToHexString;\nexports.ecPairToAddress = ecPairToAddress;\nexports.makeUUID4 = makeUUID4;\nexports.isSameOriginAbsoluteUrl = isSameOriginAbsoluteUrl;\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _bitcoinjsLib = require('bitcoinjs-lib');\n\nvar _config = require('./config');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BLOCKSTACK_HANDLER = exports.BLOCKSTACK_HANDLER = 'blockstack';\n/**\n * Time\n * @private\n */\n\nfunction nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\nfunction nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\nfunction nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Query Strings\n * @private\n */\n\nfunction updateQueryStringParameter(uri, key, value) {\n  var re = new RegExp('([?&])' + key + '=.*?(&|$)', 'i');\n  var separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, '$1' + key + '=' + value + '$2');\n  } else {\n    return '' + uri + separator + key + '=' + value;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n */\n\nfunction isLaterVersion(v1, v2) {\n  if (v1 === undefined) {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined) {\n    v2 = '0.0.0';\n  }\n\n  var v1tuple = v1.split('.').map(function (x) {\n    return parseInt(x, 10);\n  });\n  var v2tuple = v2.split('.').map(function (x) {\n    return parseInt(x, 10);\n  });\n\n  for (var index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction hexStringToECPair(skHex) {\n  var ecPairOptions = {\n    network: _config.config.network.layer1,\n    compressed: true\n  };\n\n  if (skHex.length === 66) {\n    if (skHex.slice(64) !== '01') {\n      throw new Error('Improperly formatted private-key hex string. 66-length hex usually ' + 'indicates compressed key, but last byte must be == 1');\n    }\n    return _bitcoinjsLib.ECPair.fromPrivateKey(new Buffer(skHex.slice(0, 64), 'hex'), ecPairOptions);\n  } else if (skHex.length === 64) {\n    ecPairOptions.compressed = false;\n    return _bitcoinjsLib.ECPair.fromPrivateKey(new Buffer(skHex, 'hex'), ecPairOptions);\n  } else {\n    throw new Error('Improperly formatted private-key hex string: length should be 64 or 66.');\n  }\n}\n\nfunction ecPairToHexString(secretKey) {\n  var ecPointHex = secretKey.privateKey.toString('hex');\n  if (secretKey.compressed) {\n    return ecPointHex + '01';\n  } else {\n    return ecPointHex;\n  }\n}\n\nfunction ecPairToAddress(keyPair) {\n  return _bitcoinjsLib.address.toBase58Check(_bitcoinjsLib.crypto.hash160(keyPair.publicKey), keyPair.network.pubKeyHash);\n}\n\n/**\n * UUIDs\n * @private\n */\n\nfunction makeUUID4() {\n  var d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n */\nfunction isSameOriginAbsoluteUrl(uri1, uri2) {\n  var parsedUri1 = _url2.default.parse(uri1);\n  var parsedUri2 = _url2.default.parse(uri2);\n\n  var port1 = parseInt(parsedUri1.port, 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n  var port2 = parseInt(parsedUri2.port, 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n  var match = {\n    scheme: parsedUri1.protocol === parsedUri2.protocol,\n    hostname: parsedUri1.hostname === parsedUri2.hostname,\n    port: port1 === port2,\n    absolute: (uri1.includes('http://') || uri1.includes('https://')) && (uri2.includes('http://') || uri2.includes('https://'))\n  };\n\n  return match.scheme && match.hostname && match.port && match.absolute;\n}\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","Object","defineProperty","value","BLOCKSTACK_HANDLER","undefined","nextYear","Date","setFullYear","getFullYear","nextMonth","setMonth","getMonth","nextHour","setHours","getHours","updateQueryStringParameter","uri","key","re","RegExp","separator","indexOf","match","replace","isLaterVersion","v1","v2","v1tuple","split","map","x","parseInt","v2tuple","index","length","push","hexStringToECPair","skHex","ecPairOptions","network","_config","config","layer1","compressed","slice","Error","_bitcoinjsLib","ECPair","fromPrivateKey","Buffer","ecPairToHexString","secretKey","ecPointHex","privateKey","toString","ecPairToAddress","keyPair","address","toBase58Check","crypto","hash160","publicKey","pubKeyHash","makeUUID4","d","getTime","performance","now","c","r","Math","random","floor","isSameOriginAbsoluteUrl","uri1","uri2","parsedUri1","_url2","default","parse","parsedUri2","port1","port","protocol","port2","hostname","includes","scheme","absolute","_url","__esModule"]
}
