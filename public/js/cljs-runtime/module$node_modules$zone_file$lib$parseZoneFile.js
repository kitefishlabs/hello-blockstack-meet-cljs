shadow$provide.module$node_modules$zone_file$lib$parseZoneFile=function(global,process,require,module,exports,shadow$shims){Object.defineProperty(exports,"__esModule",{value:!0});exports.parseZoneFile=function(text$jscomp$0){var text=text$jscomp$0=removeComments(text$jscomp$0);text$jscomp$0=[];for(var re=/\([\s\S]*?\)/gim,match=re.exec(text);null!==match;)match.replacement=match[0].replace(/\s+/gm," "),text$jscomp$0.push(match),match=re.exec(text);text=text.split("");for(var i in text$jscomp$0)match=
text$jscomp$0[i],text.splice(match.index,match[0].length,match.replacement);text$jscomp$0=text.join("").replace(/\(|\)/gim," ");i={};text$jscomp$0=text$jscomp$0.split("\n");for(var i$jscomp$0 in text$jscomp$0)(text=text$jscomp$0[i$jscomp$0])&&text.trim()&&(match=text.toUpperCase(),/\s+TXT\s+/.test(match)?(i.txt=i.txt||[],i.txt.push(parseTXT(text))):0===match.indexOf("$ORIGIN")?i.$origin=text.split(/\s+/g)[1]:0===match.indexOf("$TTL")?i.$ttl=parseInt(text.split(/\s+/g)[1],10):/\s+SOA\s+/.test(match)?
(match={},text=text.trim().split(/\s+/g),re=text.length,match.name=text[0],match.minimum=parseInt(text[re-1],10),match.expire=parseInt(text[re-2],10),match.retry=parseInt(text[re-3],10),match.refresh=parseInt(text[re-4],10),match.serial=parseInt(text[re-5],10),match.rname=text[re-6],match.mname=text[re-7],isNaN(text[1])||(match.ttl=parseInt(text[1],10)),i.soa=match):/\s+NS\s+/.test(match)?(i.ns=i.ns||[],i.ns.push(parseNS(text))):/\s+A\s+/.test(match)?(i.a=i.a||[],i.a.push(parseA(text,i.a))):/\s+AAAA\s+/.test(match)?
(i.aaaa=i.aaaa||[],i.aaaa.push(parseAAAA(text))):/\s+CNAME\s+/.test(match)?(i.cname=i.cname||[],i.cname.push(parseCNAME(text))):/\s+MX\s+/.test(match)?(i.mx=i.mx||[],i.mx.push(parseMX(text))):/\s+PTR\s+/.test(match)?(i.ptr=i.ptr||[],i.ptr.push(parsePTR(text,i.ptr,i.$origin))):/\s+SRV\s+/.test(match)?(i.srv=i.srv||[],i.srv.push(parseSRV(text))):/\s+SPF\s+/.test(match)?(i.spf=i.spf||[],i.spf.push(parseSPF(text))):/\s+URI\s+/.test(match)&&(i.uri=i.uri||[],i.uri.push(parseURI(text))));return i};var removeComments=
function(text){return text.replace(/(^|[^\\]);.*/g,function(m,g1){return g1?g1:""})},parseNS=function(rr){rr=rr.trim().split(/\s+/g);var result={name:rr[0],host:rr[rr.length-1]};isNaN(rr[1])||(result.ttl=parseInt(rr[1],10));return result},parseA=function(rr,recordsSoFar){var rrTokens=rr.trim().split(/\s+/g);rr=rr.trim().toUpperCase().split(/\s+/g);var result={name:rrTokens[0],ip:rrTokens[rrTokens.length-1]};0===rr.lastIndexOf("A")&&(result.name=recordsSoFar.length?recordsSoFar[recordsSoFar.length-
1].name:"@");isNaN(rrTokens[1])||(result.ttl=parseInt(rrTokens[1],10));return result},parseAAAA=function(rr){rr=rr.trim().split(/\s+/g);var result={name:rr[0],ip:rr[rr.length-1]};isNaN(rr[1])||(result.ttl=parseInt(rr[1],10));return result},parseCNAME=function(rr){rr=rr.trim().split(/\s+/g);var result={name:rr[0],alias:rr[rr.length-1]};isNaN(rr[1])||(result.ttl=parseInt(rr[1],10));return result},parseMX=function(rr){rr=rr.trim().split(/\s+/g);var l=rr.length;l={name:rr[0],preference:parseInt(rr[l-
2],10),host:rr[l-1]};isNaN(rr[1])||(l.ttl=parseInt(rr[1],10));return l},parseTXT=function(rr){rr=rr.trim().match(/[^\s"']+|"[^"]*"|'[^']*'/g);var l=rr.length,indexTXT=rr.indexOf("TXT"),stripText=function(txt){-1<txt.indexOf('"')&&(txt=txt.split('"')[1]);-1<txt.indexOf('"')&&(txt=txt.split('"')[1]);return txt},tokenTxt=void 0;tokenTxt=1<l-indexTXT-1?rr.slice(indexTXT+1).map(stripText):stripText(rr[l-1]);l={name:rr[0],txt:tokenTxt};isNaN(rr[1])||(l.ttl=parseInt(rr[1],10));return l},parsePTR=function(rr,
recordsSoFar,currentOrigin){var rrTokens=rr.trim().split(/\s+/g);0===rr.trim().toUpperCase().split(/\s+/g).lastIndexOf("PTR")&&recordsSoFar[recordsSoFar.length-1]&&rrTokens.unshift(recordsSoFar[recordsSoFar.length-1].name);rr={name:rrTokens[0],fullname:rrTokens[0]+"."+currentOrigin,host:rrTokens[rrTokens.length-1]};isNaN(rrTokens[1])||(rr.ttl=parseInt(rrTokens[1],10));return rr},parseSRV=function(rr){rr=rr.trim().split(/\s+/g);var l=rr.length;l={name:rr[0],target:rr[l-1],priority:parseInt(rr[l-4],
10),weight:parseInt(rr[l-3],10),port:parseInt(rr[l-2],10)};isNaN(rr[1])||(l.ttl=parseInt(rr[1],10));return l},parseSPF=function(rr){rr=rr.trim().split(/\s+/g);for(var result={name:rr[0],data:""},l=rr.length;4<l--;)result.data=rr[l]+" "+result.data.trim();isNaN(rr[1])||(result.ttl=parseInt(rr[1],10));return result},parseURI=function(rr){rr=rr.trim().split(/\s+/g);var l=rr.length;l={name:rr[0],target:rr[l-1].replace(/"/g,""),priority:parseInt(rr[l-3],10),weight:parseInt(rr[l-2],10)};isNaN(rr[1])||(l.ttl=
parseInt(rr[1],10));return l}}
//# sourceMappingURL=module$node_modules$zone_file$lib$parseZoneFile.js.map
