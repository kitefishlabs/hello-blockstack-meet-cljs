shadow$provide.module$node_modules$htmlparser2$lib$Parser=function(global,process,require,module,exports,shadow$shims){function Parser(cbs,options){this._options=options||{};this._cbs=cbs||{};this._attribvalue=this._attribname=this._tagname="";this._attribs=null;this._stack=[];this._foreignContext=[];this.startIndex=0;this.endIndex=null;this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode;this._lowerCaseAttributeNames="lowerCaseAttributeNames"in
this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode;this._options.Tokenizer&&(Tokenizer=this._options.Tokenizer);this._tokenizer=new Tokenizer(this._options,this);if(this._cbs.onparserinit)this._cbs.onparserinit(this)}var Tokenizer=require("module$node_modules$htmlparser2$lib$Tokenizer");global={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0};var openImpliesClose={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,
script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:global,input:global,output:global,button:global,datalist:global,textarea:global,option:{option:!0},optgroup:{optgroup:!0}},voidElements={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},foreignContextElements={__proto__:null,math:!0,svg:!0},htmlIntegrationElements={__proto__:null,
mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},re_nameEnd=/\s|\//;require("module$node_modules$inherits$inherits_browser")(Parser,require("module$node_modules$events$events").EventEmitter);Parser.prototype._updatePosition=function(initialOffset){this.startIndex=null===this.endIndex?this._tokenizer._sectionStart<=initialOffset?0:this._tokenizer._sectionStart-initialOffset:this.endIndex+1;this.endIndex=this._tokenizer.getAbsoluteIndex()};Parser.prototype.ontext=
function(data){this._updatePosition(1);this.endIndex--;if(this._cbs.ontext)this._cbs.ontext(data)};Parser.prototype.onopentagname=function(name){this._lowerCaseTagNames&&(name=name.toLowerCase());this._tagname=name;if(!this._options.xmlMode&&name in openImpliesClose)for(var el;(el=this._stack[this._stack.length-1])in openImpliesClose[name];this.onclosetag(el));!this._options.xmlMode&&name in voidElements||(this._stack.push(name),name in foreignContextElements?this._foreignContext.push(!0):name in
htmlIntegrationElements&&this._foreignContext.push(!1));if(this._cbs.onopentagname)this._cbs.onopentagname(name);this._cbs.onopentag&&(this._attribs={})};Parser.prototype.onopentagend=function(){this._updatePosition(1);if(this._attribs){if(this._cbs.onopentag)this._cbs.onopentag(this._tagname,this._attribs);this._attribs=null}if(!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in voidElements)this._cbs.onclosetag(this._tagname);this._tagname=""};Parser.prototype.onclosetag=function(name){this._updatePosition(1);
this._lowerCaseTagNames&&(name=name.toLowerCase());if(!this._stack.length||name in voidElements&&!this._options.xmlMode)this._options.xmlMode||"br"!==name&&"p"!==name||(this.onopentagname(name),this._closeCurrentTag());else{var pos=this._stack.lastIndexOf(name);if(-1!==pos)if(this._cbs.onclosetag)for(pos=this._stack.length-pos;pos--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=pos;else"p"!==name||this._options.xmlMode||(this.onopentagname(name),this._closeCurrentTag())}};Parser.prototype.onselfclosingtag=
function(){if(this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1])this._closeCurrentTag();else this.onopentagend()};Parser.prototype._closeCurrentTag=function(){var name=this._tagname;this.onopentagend();if(this._stack[this._stack.length-1]===name){if(this._cbs.onclosetag)this._cbs.onclosetag(name);this._stack.pop();(name in foreignContextElements||name in htmlIntegrationElements)&&this._foreignContext.pop()}};Parser.prototype.onattribname=
function(name){this._lowerCaseAttributeNames&&(name=name.toLowerCase());this._attribname=name};Parser.prototype.onattribdata=function(value){this._attribvalue+=value};Parser.prototype.onattribend=function(){if(this._cbs.onattribute)this._cbs.onattribute(this._attribname,this._attribvalue);this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue);this._attribvalue=this._attribname=""};Parser.prototype._getInstructionName=
function(value){var idx=value.search(re_nameEnd);value=0>idx?value:value.substr(0,idx);this._lowerCaseTagNames&&(value=value.toLowerCase());return value};Parser.prototype.ondeclaration=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("!"+name,"!"+value)}};Parser.prototype.onprocessinginstruction=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("?"+
name,"?"+value)}};Parser.prototype.oncomment=function(value){this._updatePosition(4);if(this._cbs.oncomment)this._cbs.oncomment(value);if(this._cbs.oncommentend)this._cbs.oncommentend()};Parser.prototype.oncdata=function(value){this._updatePosition(1);if(this._options.xmlMode||this._options.recognizeCDATA){if(this._cbs.oncdatastart)this._cbs.oncdatastart();if(this._cbs.ontext)this._cbs.ontext(value);if(this._cbs.oncdataend)this._cbs.oncdataend()}else this.oncomment("[CDATA["+value+"]]")};Parser.prototype.onerror=
function(err){if(this._cbs.onerror)this._cbs.onerror(err)};Parser.prototype.onend=function(){if(this._cbs.onclosetag)for(var i=this._stack.length;0<i;this._cbs.onclosetag(this._stack[--i]));if(this._cbs.onend)this._cbs.onend()};Parser.prototype.reset=function(){if(this._cbs.onreset)this._cbs.onreset();this._tokenizer.reset();this._attribname=this._tagname="";this._attribs=null;this._stack=[];if(this._cbs.onparserinit)this._cbs.onparserinit(this)};Parser.prototype.parseComplete=function(data){this.reset();
this.end(data)};Parser.prototype.write=function(chunk){this._tokenizer.write(chunk)};Parser.prototype.end=function(chunk){this._tokenizer.end(chunk)};Parser.prototype.pause=function(){this._tokenizer.pause()};Parser.prototype.resume=function(){this._tokenizer.resume()};Parser.prototype.parseChunk=Parser.prototype.write;Parser.prototype.done=Parser.prototype.end;module.exports=Parser}
//# sourceMappingURL=module$node_modules$htmlparser2$lib$Parser.js.map
