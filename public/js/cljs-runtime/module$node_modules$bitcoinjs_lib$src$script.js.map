{
"version":3,
"file":"module$node_modules$bitcoinjs_lib$src$script.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/bitcoinjs-lib/src/script.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bitcoinjs_lib$src$script\"] = function(global,process,require,module,exports,shadow$shims) {\nconst Buffer = require('safe-buffer').Buffer\nconst bip66 = require('bip66')\nconst ecc = require('tiny-secp256k1')\nconst pushdata = require('pushdata-bitcoin')\nconst typeforce = require('typeforce')\nconst types = require('./types')\nconst scriptNumber = require('./script_number')\n\nconst OPS = require('bitcoin-ops')\nconst REVERSE_OPS = require('bitcoin-ops/map')\nconst OP_INT_BASE = OPS.OP_RESERVED // OP_1 - 1\n\nfunction isOPInt (value) {\n  return types.Number(value) &&\n    ((value === OPS.OP_0) ||\n    (value >= OPS.OP_1 && value <= OPS.OP_16) ||\n    (value === OPS.OP_1NEGATE))\n}\n\nfunction isPushOnlyChunk (value) {\n  return types.Buffer(value) || isOPInt(value)\n}\n\nfunction isPushOnly (value) {\n  return types.Array(value) && value.every(isPushOnlyChunk)\n}\n\nfunction asMinimalOP (buffer) {\n  if (buffer.length === 0) return OPS.OP_0\n  if (buffer.length !== 1) return\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0]\n  if (buffer[0] === 0x81) return OPS.OP_1NEGATE\n}\n\nfunction compile (chunks) {\n  // TODO: remove me\n  if (Buffer.isBuffer(chunks)) return chunks\n\n  typeforce(types.Array, chunks)\n\n  const bufferSize = chunks.reduce(function (accum, chunk) {\n    // data chunk\n    if (Buffer.isBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1\n      }\n\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length\n    }\n\n    // opcode\n    return accum + 1\n  }, 0.0)\n\n  const buffer = Buffer.allocUnsafe(bufferSize)\n  let offset = 0\n\n  chunks.forEach(function (chunk) {\n    // data chunk\n    if (Buffer.isBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk)\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset)\n        offset += 1\n        return\n      }\n\n      offset += pushdata.encode(buffer, chunk.length, offset)\n      chunk.copy(buffer, offset)\n      offset += chunk.length\n\n    // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset)\n      offset += 1\n    }\n  })\n\n  if (offset !== buffer.length) throw new Error('Could not decode chunks')\n  return buffer\n}\n\nfunction decompile (buffer) {\n  // TODO: remove me\n  if (types.Array(buffer)) return buffer\n\n  typeforce(types.Buffer, buffer)\n\n  const chunks = []\n  let i = 0\n\n  while (i < buffer.length) {\n    const opcode = buffer[i]\n\n    // data chunk\n    if ((opcode > OPS.OP_0) && (opcode <= OPS.OP_PUSHDATA4)) {\n      const d = pushdata.decode(buffer, i)\n\n      // did reading a pushDataInt fail?\n      if (d === null) return null\n      i += d.size\n\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null\n\n      const data = buffer.slice(i, i + d.number)\n      i += d.number\n\n      // decompile minimally\n      const op = asMinimalOP(data)\n      if (op !== undefined) {\n        chunks.push(op)\n      } else {\n        chunks.push(data)\n      }\n\n    // opcode\n    } else {\n      chunks.push(opcode)\n\n      i += 1\n    }\n  }\n\n  return chunks\n}\n\nfunction toASM (chunks) {\n  if (Buffer.isBuffer(chunks)) {\n    chunks = decompile(chunks)\n  }\n\n  return chunks.map(function (chunk) {\n    // data?\n    if (Buffer.isBuffer(chunk)) {\n      const op = asMinimalOP(chunk)\n      if (op === undefined) return chunk.toString('hex')\n      chunk = op\n    }\n\n    // opcode!\n    return REVERSE_OPS[chunk]\n  }).join(' ')\n}\n\nfunction fromASM (asm) {\n  typeforce(types.String, asm)\n\n  return compile(asm.split(' ').map(function (chunkStr) {\n    // opcode?\n    if (OPS[chunkStr] !== undefined) return OPS[chunkStr]\n    typeforce(types.Hex, chunkStr)\n\n    // data!\n    return Buffer.from(chunkStr, 'hex')\n  }))\n}\n\nfunction toStack (chunks) {\n  chunks = decompile(chunks)\n  typeforce(isPushOnly, chunks)\n\n  return chunks.map(function (op) {\n    if (Buffer.isBuffer(op)) return op\n    if (op === OPS.OP_0) return Buffer.allocUnsafe(0)\n\n    return scriptNumber.encode(op - OP_INT_BASE)\n  })\n}\n\nfunction isCanonicalPubKey (buffer) {\n  return ecc.isPoint(buffer)\n}\n\nfunction isDefinedHashType (hashType) {\n  const hashTypeMod = hashType & ~0x80\n\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04\n}\n\nfunction isCanonicalScriptSignature (buffer) {\n  if (!Buffer.isBuffer(buffer)) return false\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false\n\n  return bip66.check(buffer.slice(0, -1))\n}\n\nmodule.exports = {\n  compile: compile,\n  decompile: decompile,\n  fromASM: fromASM,\n  toASM: toASM,\n  toStack: toStack,\n\n  number: require('./script_number'),\n  signature: require('./script_signature'),\n\n  isCanonicalPubKey: isCanonicalPubKey,\n  isCanonicalScriptSignature: isCanonicalScriptSignature,\n  isPushOnly: isPushOnly,\n  isDefinedHashType: isDefinedHashType\n}\n\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","isPushOnlyChunk","value","types","Number","OPS","OP_0","OP_1","OP_16","OP_1NEGATE","isPushOnly","Array","every","asMinimalOP","buffer","length","OP_INT_BASE","compile","chunks","Buffer","isBuffer","typeforce","bufferSize","reduce","accum","chunk","undefined","pushdata","encodingLength","allocUnsafe","offset","forEach","opcode","writeUInt8","encode","copy","Error","decompile","i","OP_PUSHDATA4","d","decode","size","number","data","slice","op","push","isDefinedHashType","hashType","hashTypeMod","bip66","ecc","scriptNumber","REVERSE_OPS","OP_RESERVED","fromASM","asm","String","split","map","chunkStr","Hex","from","toASM","toString","join","toStack","signature","isCanonicalPubKey","isPoint","isCanonicalScriptSignature","check"]
}
