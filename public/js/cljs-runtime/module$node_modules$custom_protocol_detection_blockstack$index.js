shadow$provide.module$node_modules$custom_protocol_detection_blockstack$index=function(global,process,require,module,exports,shadow$shims){function _registerEvent(target,eventType,cb){if(target.addEventListener)return target.addEventListener(eventType,cb),{remove:function(){target.removeEventListener(eventType,cb)}};target.attachEvent(eventType,cb);return{remove:function(){target.detachEvent(eventType,cb)}}}function _createHiddenIframe(target,uri){var iframe=document.createElement("iframe");iframe.src=
uri;iframe.id="hiddenIframe";iframe.style.display="none";target.appendChild(iframe);return iframe}function openUriWithHiddenFrame(uri,failCb,successCb){var timeout=setTimeout(function(){failCb();handler.remove()},1E3),iframe=document.querySelector("#hiddenIframe");iframe||(iframe=_createHiddenIframe(document.body,"about:blank"));var handler=_registerEvent(window,"blur",function(){clearTimeout(timeout);handler.remove();successCb()});iframe.contentWindow.location.href=uri}function openUriWithTimeoutHack(uri,
failCb,successCb){for(var timeout=setTimeout(function(){failCb();handler.remove()},1E3),target=window;target!=target.parent;)target=target.parent;var handler=_registerEvent(target,"blur",function(){clearTimeout(timeout);handler.remove();successCb()});window.location=uri}function openUriUsingFirefox(uri,failCb,successCb){var iframe=document.querySelector("#hiddenIframe");iframe||(iframe=_createHiddenIframe(document.body,"about:blank"));try{iframe.contentWindow.location.href=uri,successCb()}catch(e){"NS_ERROR_UNKNOWN_PROTOCOL"==
e.name&&failCb()}}function openUriUsingIEInOlderWindows(uri,failCb,successCb){10===getInternetExplorerVersion()?openUriUsingIE10InWindows7(uri,failCb,successCb):9===getInternetExplorerVersion()||11===getInternetExplorerVersion()?openUriWithHiddenFrame(uri,failCb,successCb):openUriInNewWindowHack(uri,failCb,successCb)}function openUriUsingIE10InWindows7(uri,failCb,successCb){var timeout=setTimeout(failCb,1E3);window.addEventListener("blur",function(){clearTimeout(timeout);successCb()});var iframe=
document.querySelector("#hiddenIframe");iframe||(iframe=_createHiddenIframe(document.body,"about:blank"));try{iframe.contentWindow.location.href=uri}catch(e){failCb(),clearTimeout(timeout)}}function openUriInNewWindowHack(uri,failCb,successCb){var myWindow=window.open("","","width\x3d0,height\x3d0");myWindow.document.write("\x3ciframe src\x3d'"+uri+"'\x3e\x3c/iframe\x3e");setTimeout(function(){try{myWindow.location.href,myWindow.setTimeout("window.close()",1E3),successCb()}catch(e){myWindow.close(),
failCb()}},1E3)}function checkBrowser(){var isOpera=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),JSCompiler_temp_const="undefined"!==typeof InstallTrigger;var JSCompiler_inline_result=navigator.userAgent.toLowerCase();var re2=/chrome/;JSCompiler_inline_result=/safari/.exec(JSCompiler_inline_result)&&!re2.exec(JSCompiler_inline_result);return{isOpera:isOpera,isFirefox:JSCompiler_temp_const,isSafari:JSCompiler_inline_result,isChrome:!!window.chrome&&!isOpera,isIE:!!document.documentMode}}
function getInternetExplorerVersion(){var rv=-1;if("Microsoft Internet Explorer"===navigator.appName){var ua=navigator.userAgent,re=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}else"Netscape"===navigator.appName&&(ua=navigator.userAgent,re=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1)));return rv}module.exports=function(uri,failCb,successCb,unsupportedCb){function failCallback(){failCb&&failCb()}function successCallback(){successCb&&
successCb()}if(navigator.msLaunchUri)console.log("openUriWithMsLaunchUri"),navigator.msLaunchUri(uri,successCb,failCb);else{var browser=checkBrowser();browser.isFirefox?(console.log("openUriUsingFirefox"),openUriUsingFirefox(uri,failCallback,successCallback)):browser.isChrome?/\bCrOS\b/.test(navigator.appVersion)?(console.log("unsupported OS"),unsupportedCb?unsupportedCb():failCallback()):(console.log("openUriWithTimeoutHack"),openUriWithTimeoutHack(uri,failCallback,successCallback)):browser.isIE?
(console.log("openUriUsingIEInOlderWindows"),openUriUsingIEInOlderWindows(uri,failCallback,successCallback)):(console.log("unsupported browser"),unsupportedCb?unsupportedCb():failCallback())}}}
//# sourceMappingURL=module$node_modules$custom_protocol_detection_blockstack$index.js.map
