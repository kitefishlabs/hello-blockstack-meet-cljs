shadow$provide.module$node_modules$asn1_DOT_js$lib$asn1$encoders$der=function(global,process,require,module,exports,shadow$shims){function DEREncoder(entity){this.enc="der";this.name=entity.name;this.entity=entity;this.tree=new DERNode;this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,"der",parent)}function two(num){return 10>num?"0"+num:num}global=require("module$node_modules$inherits$inherits_browser");var Buffer=require("module$node_modules$buffer$index").Buffer;require=
require("module$node_modules$asn1_DOT_js$lib$asn1");var base=require.base,der=require.constants.der;module.exports=DEREncoder;DEREncoder.prototype.encode=function(data,reporter){return this.tree._encode(data,reporter).join()};global(DERNode,base.Node);DERNode.prototype._encodeComposite=function(tag$jscomp$0,primitive,cls,content){a:{var tag=tag$jscomp$0;tag$jscomp$0=this.reporter;"seqof"===tag?tag="seq":"setof"===tag&&(tag="set");if(der.tagByName.hasOwnProperty(tag))tag=der.tagByName[tag];else if("number"!==
typeof tag||(tag|0)!==tag){tag$jscomp$0=tag$jscomp$0.error("Unknown tag: "+tag);break a}31<=tag?tag$jscomp$0=tag$jscomp$0.error("Multi-octet tag encoding unsupported"):(primitive||(tag|=32),tag$jscomp$0=tag|=der.tagClassByName[cls||"universal"]<<6)}if(128>content.length)return primitive=new Buffer(2),primitive[0]=tag$jscomp$0,primitive[1]=content.length,this._createEncoderBuffer([primitive,content]);tag=1;for(cls=content.length;256<=cls;cls>>=8)tag++;primitive=new Buffer(2+tag);primitive[0]=tag$jscomp$0;
primitive[1]=128|tag;cls=1+tag;for(tag$jscomp$0=content.length;0<tag$jscomp$0;cls--,tag$jscomp$0>>=8)primitive[cls]=tag$jscomp$0&255;return this._createEncoderBuffer([primitive,content])};DERNode.prototype._encodeStr=function(str,tag){if("bitstr"===tag)return this._createEncoderBuffer([str.unused|0,str.data]);if("bmpstr"===tag){tag=new Buffer(2*str.length);for(var i=0;i<str.length;i++)tag.writeUInt16BE(str.charCodeAt(i),2*i);return this._createEncoderBuffer(tag)}return"numstr"===tag?this._isNumstr(str)?
this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===tag?this._isPrintstr(str)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(tag)?this._createEncoderBuffer(str):"objDesc"===tag?this._createEncoderBuffer(str):
this.reporter.error("Encoding of string type: "+tag+" unsupported")};DERNode.prototype._encodeObjid=function(id,values,relative){if("string"===typeof id){if(!values)return this.reporter.error("string objid given, but no values map found");if(!values.hasOwnProperty(id))return this.reporter.error("objid not found in values map");id=values[id].split(/[\s\.]+/g);for(values=0;values<id.length;values++)id[values]|=0}else if(Array.isArray(id))for(id=id.slice(),values=0;values<id.length;values++)id[values]|=
0;if(!Array.isArray(id))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(id));if(!relative){if(40<=id[1])return this.reporter.error("Second objid identifier OOB");id.splice(0,2,40*id[0]+id[1])}var size=0;for(values=0;values<id.length;values++)for(relative=id[values],size++;128<=relative;relative>>=7)size++;size=new Buffer(size);var offset=size.length-1;for(values=id.length-1;0<=values;values--)for(relative=id[values],size[offset--]=relative&127;0<(relative>>=
7);)size[offset--]=128|relative&127;return this._createEncoderBuffer(size)};DERNode.prototype._encodeTime=function(time,tag){var str;time=new Date(time);"gentime"===tag?str=[two(time.getFullYear()),two(time.getUTCMonth()+1),two(time.getUTCDate()),two(time.getUTCHours()),two(time.getUTCMinutes()),two(time.getUTCSeconds()),"Z"].join(""):"utctime"===tag?str=[two(time.getFullYear()%100),two(time.getUTCMonth()+1),two(time.getUTCDate()),two(time.getUTCHours()),two(time.getUTCMinutes()),two(time.getUTCSeconds()),
"Z"].join(""):this.reporter.error("Encoding "+tag+" time is not supported yet");return this._encodeStr(str,"octstr")};DERNode.prototype._encodeNull=function(){return this._createEncoderBuffer("")};DERNode.prototype._encodeInt=function(num,values){if("string"===typeof num){if(!values)return this.reporter.error("String int or enum given, but no values map");if(!values.hasOwnProperty(num))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(num));num=values[num]}"number"===typeof num||
Buffer.isBuffer(num)||(values=num.toArray(),!num.sign&&values[0]&128&&values.unshift(0),num=new Buffer(values));if(Buffer.isBuffer(num)){var size=num.length;0===num.length&&size++;size=new Buffer(size);num.copy(size);0===num.length&&(size[0]=0);return this._createEncoderBuffer(size)}if(128>num)return this._createEncoderBuffer(num);if(256>num)return this._createEncoderBuffer([0,num]);size=1;for(values=num;256<=values;values>>=8)size++;size=Array(size);for(values=size.length-1;0<=values;values--)size[values]=
num&255,num>>=8;size[0]&128&&size.unshift(0);return this._createEncoderBuffer(new Buffer(size))};DERNode.prototype._encodeBool=function(value){return this._createEncoderBuffer(value?255:0)};DERNode.prototype._use=function(entity,obj){"function"===typeof entity&&(entity=entity(obj));return entity._getEncoder("der").tree};DERNode.prototype._skipDefault=function(dataBuffer,reporter,parent){var state=this._baseState;if(null===state["default"])return!1;dataBuffer=dataBuffer.join();void 0===state.defaultBuffer&&
(state.defaultBuffer=this._encodeValue(state["default"],reporter,parent).join());if(dataBuffer.length!==state.defaultBuffer.length)return!1;for(reporter=0;reporter<dataBuffer.length;reporter++)if(dataBuffer[reporter]!==state.defaultBuffer[reporter])return!1;return!0}}
//# sourceMappingURL=module$node_modules$asn1_DOT_js$lib$asn1$encoders$der.js.map
