shadow$provide.module$node_modules$schema_inspector$lib$schema_inspector=function(global,process,require,module,exports,shadow$shims){(function(){function _extend(origin,add){if(!add||"object"!==typeof add)return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}function _merge(){var ret={},keys=null,i=null;Array.prototype.slice.call(arguments).forEach(function(arg){if(arg&&arg.constructor===Object)for(keys=Object.keys(arg),i=keys.length;i--;)ret[keys[i]]=
arg[keys[i]]});return ret}function Customisable(){this.custom={};this.extend=function(custom){return _extend(this.custom,custom)};this.reset=function(){this.custom={}};this.remove=function(fields){_typeIs.array(fields)||(fields=[fields]);fields.forEach(function(field){delete this.custom[field]},this)}}function Inspection(schema,custom){var _stack=["@"];this._schema=schema;this._custom={};if(null!=custom)for(var key in custom)custom.hasOwnProperty(key)&&(this._custom["$"+key]=custom[key]);this._getDepth=
function(){return _stack.length};this._dumpStack=function(){return _stack.map(function(i){return i.replace(/^\[/g,"")}).join(".").replace(/\.\u001b\u001c\u001d\u001e/g,"[")};this._deeperObject=function(name){_stack.push(/^[a-z$_][a-z0-9$_]*$/i.test(name)?name:'["'+name+'"]');return this};this._deeperArray=function(i){_stack.push("["+i+"]");return this};this._back=function(){_stack.pop();return this}}function _simpleType(type,candidate){if("function"==typeof type)return candidate instanceof type;
type=type in _typeIs?type:"any";return _typeIs[type](candidate)}function _realType(candidate){for(var i in _typeIs)if(_simpleType(i,candidate))return"any"!==i?i:"an instance of "+candidate.constructor.name}function Validation(schema,custom){Inspection.prototype.constructor.call(this,schema,_merge(Validation.custom,custom));var _error=[];this._basicFields=Object.keys(_validationAttribut);this._customFields=Object.keys(this._custom);this.origin=null;this.report=function(message,code,reason){message=
{code:code||this.userCode||null,reason:reason||"unknown",message:this.userError||message||"is invalid",property:this.userAlias?this.userAlias+" ("+this._dumpStack()+")":this._dumpStack()};_error.push(message);return this};this.result=function(){return{error:_error,valid:0===_error.length,format:function(){return!0===this.valid?"Candidate is valid":this.error.map(function(i){return"Property "+i.property+": "+i.message}).join("\n")}}}}function Sanitization(schema,custom){Inspection.prototype.constructor.call(this,
schema,_merge(Sanitization.custom,custom));var _reporting=[];this._basicFields=Object.keys(_sanitizationAttribut);this._customFields=Object.keys(this._custom);this.origin=null;this.report=function(message){var newNot={message:message||"was sanitized",property:this.userAlias?this.userAlias+" ("+this._dumpStack()+")":this._dumpStack()};_reporting.some(function(e){return e.property===newNot.property})||_reporting.push(newNot)};this.result=function(data){return{data:data,reporting:_reporting,format:function(){return this.reporting.map(function(i){return"Property "+
i.property+" "+i.message}).join("\n")}}}}function _getLimits(schema){var min=-2147483648,max=2147483647;null!=schema.gte?min=schema.gte:null!=schema.gt&&(min=schema.gt+1);null!=schema.lte?max=schema.lte:null!=schema.lt&&(max=schema.lt-1);return{min:min,max:max}}function CandidateGenerator(){}var JSCompiler_object_inline_async_2622="function"===typeof require?require("module$node_modules$async$lib$async"):window.async;if("object"!==typeof JSCompiler_object_inline_async_2622)throw Error("Module async is required (https://github.com/caolan/async)");
var _typeIs={"function":function(element){return"function"===typeof element},string:function(element){return"string"===typeof element},number:function(element){return"number"===typeof element&&!isNaN(element)},integer:function(element){return"number"===typeof element&&0===element%1},NaN:function(element){return"number"===typeof element&&isNaN(element)},"boolean":function(element){return"boolean"===typeof element},"null":function(element){return null===element},date:function(element){return null!=
element&&element instanceof Date},object:function(element){return null!=element&&element.constructor===Object},array:function(element){return null!=element&&element.constructor===Array},any:function(element){return!0}},_formats={"void":/^$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)?(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
"date-time":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?(Z?|(-|\+)\d{2}:\d{2})$/,date:/^\d{4}-\d{2}-\d{2}$/,coolDateTime:/^\d{4}(-|\/)\d{2}(-|\/)\d{2}(T| )\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/,time:/^\d{2}:\d{2}:\d{2}$/,color:/^#([0-9a-f])+$/i,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
numeric:/^[0-9]+$/,integer:/^\-?[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]+$/,alpha:/^[a-z]+$/i,alphaNumeric:/^[a-z0-9]+$/i,alphaDash:/^[a-z0-9_-]+$/i,javascript:/^[a-z_\$][a-z0-9_\$]*$/i,upperString:/^[A-Z ]*$/,lowerString:/^[a-z ]*$/},_validationAttribut={optional:function(schema,candidate){!0!==("boolean"===typeof schema.optional?schema.optional:"true"===schema.optional)&&"undefined"===typeof candidate&&this.report("is missing and not optional",null,"optional")},type:function(schema,candidate){"undefined"!==
typeof candidate&&("string"===typeof schema.type||schema.type instanceof Array||"function"===typeof schema.type)&&(schema=_typeIs.array(schema.type)?schema.type:[schema.type],schema.some(function(type){return _simpleType(type,candidate)})||(schema=schema.map(function(t){return"function"===typeof t?"and instance of "+t.name:t}),this.report("must be "+schema.join(" or ")+", but is "+_realType(candidate),null,"type")))},uniqueness:function(schema,candidate){"string"===typeof schema.uniqueness&&(schema.uniqueness=
"true"===schema.uniqueness);if("boolean"===typeof schema.uniqueness&&!1!==schema.uniqueness&&(_typeIs.array(candidate)||"string"===typeof candidate)){schema=[];for(var i=0;i<candidate.length;i++)if(!(0<=schema.indexOf(candidate[i]))){var indexes=candidate;for(var value=candidate[i],indexes$jscomp$0=[],i$jscomp$0=indexes.indexOf(value);-1!==i$jscomp$0;)indexes$jscomp$0.push(i$jscomp$0),i$jscomp$0=indexes.indexOf(value,i$jscomp$0+1);indexes=indexes$jscomp$0;1<indexes.length&&(schema.push(candidate[i]),
this.report("has value ["+candidate[i]+"] more than once at indexes ["+indexes.join(", ")+"]",null,"uniqueness"))}}},pattern:function(schema,candidate){schema=schema.pattern;if("string"===typeof candidate){var matches=!1;_typeIs.array(schema)||(schema=[schema]);schema.forEach(function(regex){"string"===typeof regex&&regex in _formats&&(regex=_formats[regex]);regex instanceof RegExp&&regex.test(candidate)&&(matches=!0)});matches||this.report("must match ["+schema.join(" or ")+'], but is equal to "'+
candidate+'"',null,"pattern")}},validDate:function(schema,candidate){"true"===String(schema.validDate)&&candidate instanceof Date&&isNaN(candidate.getTime())&&this.report("must be a valid date",null,"validDate")},minLength:function(schema,candidate){if("string"===typeof candidate||_typeIs.array(candidate))schema=Number(schema.minLength),isNaN(schema)||candidate.length<schema&&this.report("must be longer than "+schema+" elements, but it has "+candidate.length,null,"minLength")},maxLength:function(schema,
candidate){if("string"===typeof candidate||_typeIs.array(candidate))schema=Number(schema.maxLength),isNaN(schema)||candidate.length>schema&&this.report("must be shorter than "+schema+" elements, but it has "+candidate.length,null,"maxLength")},exactLength:function(schema,candidate){if("string"===typeof candidate||_typeIs.array(candidate))schema=Number(schema.exactLength),isNaN(schema)||candidate.length!==schema&&this.report("must have exactly "+schema+" elements, but it have "+candidate.length,null,
"exactLength")},lt:function(schema,candidate){schema=Number(schema.lt);"number"!==typeof candidate||isNaN(schema)||candidate>=schema&&this.report("must be less than "+schema+', but is equal to "'+candidate+'"',null,"lt")},lte:function(schema,candidate){schema=Number(schema.lte);"number"!==typeof candidate||isNaN(schema)||candidate>schema&&this.report("must be less than or equal to "+schema+', but is equal to "'+candidate+'"',null,"lte")},gt:function(schema,candidate){schema=Number(schema.gt);"number"!==
typeof candidate||isNaN(schema)||candidate<=schema&&this.report("must be greater than "+schema+', but is equal to "'+candidate+'"',null,"gt")},gte:function(schema,candidate){schema=Number(schema.gte);"number"!==typeof candidate||isNaN(schema)||candidate<schema&&this.report("must be greater than or equal to "+schema+', but is equal to "'+candidate+'"',null,"gte")},eq:function(schema,candidate){if("number"===typeof candidate||"string"===typeof candidate||"boolean"===typeof candidate)if(schema=schema.eq,
"number"===typeof schema||"string"===typeof schema||"boolean"===typeof schema||_typeIs.array(schema))if(_typeIs.array(schema)){for(var i=0;i<schema.length;i++)if(candidate===schema[i])return;this.report("must be equal to ["+schema.map(function(l){return'"'+l+'"'}).join(" or ")+'], but is equal to "'+candidate+'"',null,"eq")}else candidate!==schema&&this.report('must be equal to "'+schema+'", but is equal to "'+candidate+'"',null,"eq")},ne:function(schema,candidate){if("number"===typeof candidate||
"string"===typeof candidate)if(schema=schema.ne,"number"===typeof schema||"string"===typeof schema||_typeIs.array(schema))if(_typeIs.array(schema))for(var i=0;i<schema.length;i++){if(candidate===schema[i]){this.report('must not be equal to "'+schema[i]+'"',null,"ne");break}}else candidate===schema&&this.report('must not be equal to "'+schema+'"',null,"ne")},someKeys:function(schema,candidat){schema=schema.someKeys;_typeIs.object(candidat)&&(schema.some(function(action){return action in candidat})||
this.report("must have at least key "+schema.map(function(i){return'"'+i+'"'}).join(" or "),null,"someKeys"))},strict:function(schema,candidate){"string"===typeof schema.strict&&(schema.strict="true"===schema.strict);!0===schema.strict&&_typeIs.object(candidate)&&_typeIs.object(schema.properties)&&"undefined"===typeof schema.properties["*"]&&(candidate=Object.keys(candidate).filter(function(key){return"undefined"===typeof schema.properties[key]}),0<candidate.length&&(candidate="should not contains "+
(1<candidate.length?"properties":"property")+" ["+candidate.map(function(i){return'"'+i+'"'}).join(", ")+"]",this.report(candidate,null,"strict")))},exec:function(schema,candidate,callback){var self=this;if("function"===typeof callback)return this.asyncExec(schema,candidate,callback);(_typeIs.array(schema.exec)?schema.exec:[schema.exec]).forEach(function(exec){"function"===typeof exec&&exec.call(self,schema,candidate)})},properties:function(schema,candidate,callback){if("function"===typeof callback)return this.asyncProperties(schema,
candidate,callback);if(schema.properties instanceof Object&&candidate instanceof Object){schema=schema.properties;var i;if(null!=schema["*"])for(i in candidate)i in schema||(this._deeperObject(i),this._validate(schema["*"],candidate[i]),this._back());for(i in schema)"*"!==i&&(this._deeperObject(i),this._validate(schema[i],candidate[i]),this._back())}},items:function(schema,candidate,callback){if("function"===typeof callback)return this.asyncItems(schema,candidate,callback);if(schema.items instanceof
Object&&candidate instanceof Object)if(schema=schema.items,_typeIs.array(schema)&&_typeIs.array(candidate)){var i=0;for(callback=schema.length;i<callback;i++)this._deeperArray(i),this._validate(schema[i],candidate[i]),this._back()}else for(i in candidate)candidate.hasOwnProperty(i)&&(this._deeperArray(i),this._validate(schema,candidate[i]),this._back())}};_extend(Validation.prototype,_validationAttribut);_extend(Validation.prototype,{asyncExec:function(schema,candidate,callback){var self=this;JSCompiler_object_inline_async_2622.eachSeries(_typeIs.array(schema.exec)?
schema.exec:[schema.exec],function(exec,done){if("function"===typeof exec){if(2<exec.length)return exec.call(self,schema,candidate,done);exec.call(self,schema,candidate)}JSCompiler_object_inline_async_2622.nextTick(done)},callback)},asyncProperties:function(schema,candidate,callback){if(!(schema.properties instanceof Object&&_typeIs.object(candidate)))return callback();var self=this,properties=schema.properties;JSCompiler_object_inline_async_2622.series([function(next){if(null==properties["*"])return next();
JSCompiler_object_inline_async_2622.eachSeries(Object.keys(candidate),function(i,done){if(i in properties)return JSCompiler_object_inline_async_2622.nextTick(done);self._deeperObject(i);self._asyncValidate(properties["*"],candidate[i],function(err){self._back();done(err)})},next)},function(next){JSCompiler_object_inline_async_2622.eachSeries(Object.keys(properties),function(i,done){if("*"===i)return JSCompiler_object_inline_async_2622.nextTick(done);self._deeperObject(i);self._asyncValidate(properties[i],
candidate[i],function(err){self._back();done(err)})},next)}],callback)},asyncItems:function(schema,candidate,callback){if(!(schema.items instanceof Object&&candidate instanceof Object))return callback();var self=this,items=schema.items;_typeIs.array(items)&&_typeIs.array(candidate)?JSCompiler_object_inline_async_2622.timesSeries(items.length,function(i,done){self._deeperArray(i);self._asyncValidate(items[i],candidate[i],function(err,res){self._back();done(err,res)});self._back()},callback):JSCompiler_object_inline_async_2622.eachSeries(Object.keys(candidate),
function(key,done){self._deeperArray(key);self._asyncValidate(items,candidate[key],function(err,res){self._back();done(err,res)})},callback)}});_extend(Validation,new Customisable);Validation.prototype.validate=function(candidate,callback){this.origin=candidate;if("function"===typeof callback){var self=this;return JSCompiler_object_inline_async_2622.nextTick(function(){self._asyncValidate(self._schema,candidate,function(err){self.origin=null;callback(err,self.result())})})}return this._validate(this._schema,
candidate).result()};Validation.prototype._validate=function(schema,candidate,callback){this.userCode=schema.code||null;this.userError=schema.error||null;this.userAlias=schema.alias||null;this._basicFields.forEach(function(i){if((i in schema||"optional"===i)&&"function"===typeof this[i])this[i](schema,candidate)},this);this._customFields.forEach(function(i){i in schema&&"function"===typeof this._custom[i]&&this._custom[i].call(this,schema,candidate)},this);return this};Validation.prototype._asyncValidate=
function(schema,candidate,callback){var self=this;this.userCode=schema.code||null;this.userError=schema.error||null;this.userAlias=schema.alias||null;JSCompiler_object_inline_async_2622.series([function(next){JSCompiler_object_inline_async_2622.eachSeries(Object.keys(_validationAttribut),function(i,done){JSCompiler_object_inline_async_2622.nextTick(function(){if((i in schema||"optional"===i)&&"function"===typeof self[i]){if(2<self[i].length)return self[i](schema,candidate,done);self[i](schema,candidate)}done()})},
next)},function(next){JSCompiler_object_inline_async_2622.eachSeries(Object.keys(self._custom),function(i,done){JSCompiler_object_inline_async_2622.nextTick(function(){if(i in schema&&"function"===typeof self._custom[i]){if(2<self._custom[i].length)return self._custom[i].call(self,schema,candidate,done);self._custom[i].call(self,schema,candidate)}done()})},next)}],callback)};var _forceType={number:function(post,schema){if("number"===typeof post)return post;if(""===post){if("undefined"!==typeof schema.def)return schema.def}else if("string"===
typeof post){if(post=parseFloat(post.replace(/,/g,".").replace(/ /g,"")),"number"===typeof post)return post}else if(post instanceof Date)return+post;return null},integer:function(post,schema){if("number"===typeof post&&0===post%1)return post;if(""===post){if("undefined"!==typeof schema.def)return schema.def}else if("string"===typeof post){if(post=parseInt(post.replace(/ /g,""),10),"number"===typeof post)return post}else{if("number"===typeof post)return parseInt(post,10);if("boolean"===typeof post)return post?
1:0;if(post instanceof Date)return+post}return null},string:function(post,schema){return"boolean"===typeof post||"number"===typeof post||post instanceof Date?post.toString():_typeIs.array(post)?schema.items||schema.properties?post:post.join(String(schema.joinWith||",")):post instanceof Object?schema.items||schema.properties?post:JSON.stringify(post):"string"===typeof post&&post.length?post:null},date:function(post,schema){if(post instanceof Date)return post;post=new Date(post);return isNaN(post.getTime())?
null:post},boolean:function(post,schema){return"undefined"===typeof post?null:"string"===typeof post&&"false"===post.toLowerCase()?!1:!!post},object:function(post,schema){if("string"!==typeof post||_typeIs.object(post))return post;try{return JSON.parse(post)}catch(e){return null}},array:function(post,schema){if(_typeIs.array(post))return post;if("undefined"===typeof post)return null;if("string"===typeof post){if("["===post.substring(0,1)&&"]"===post.slice(-1))try{return JSON.parse(post)}catch(e){return null}return post.split(String(schema.splitWith||
","))}return _typeIs.array(post)?null:[post]}},_applyRules={upper:function(post){return post.toUpperCase()},lower:function(post){return post.toLowerCase()},title:function(post){return post.replace(/\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},capitalize:function(post){return post.charAt(0).toUpperCase()+post.substr(1).toLowerCase()},ucfirst:function(post){return post.charAt(0).toUpperCase()+post.substr(1)},trim:function(post){return post.trim()}},_sanitizationAttribut=
{strict:function(schema,post){"string"===typeof schema.strict&&(schema.strict="true"===schema.strict);if(!0!==schema.strict||!_typeIs.object(schema.properties)||!_typeIs.object(post))return post;Object.keys(post).forEach(function(key){key in schema.properties||delete post[key]});return post},optional:function(schema,post){if(!0===("boolean"===typeof schema.optional?schema.optional:"false"!==schema.optional)||"undefined"!==typeof post)return post;this.report();return schema.def===Date?new Date:schema.def},
type:function(schema,post){if("string"!==typeof schema.type||"function"!==typeof _forceType[schema.type])return post;var opt="boolean"===typeof schema.optional?schema.optional:!0;if("function"===typeof _forceType[schema.type]){var n=_forceType[schema.type](post,schema);if(null===n&&!opt||!n&&isNaN(n)||null===n&&"string"===schema.type)n=schema.def}else opt||(n=schema.def);return(null!=n||"undefined"!==typeof schema.def&&schema.def===n)&&n!==post?(this.report(),n):post},rules:function(schema,post){schema=
schema.rules;if("string"!==typeof post||"string"!==typeof schema&&!_typeIs.array(schema))return post;var modified=!1;(_typeIs.array(schema)?schema:[schema]).forEach(function(rule){"function"===typeof _applyRules[rule]&&(post=_applyRules[rule](post),modified=!0)});modified&&this.report();return post},min:function(schema,post){var postTest=Number(post);if(isNaN(postTest))return post;schema=Number(schema.min);return isNaN(schema)?post:postTest<schema?(this.report(),schema):post},max:function(schema,
post){var postTest=Number(post);if(isNaN(postTest))return post;schema=Number(schema.max);return isNaN(schema)?post:postTest>schema?(this.report(),schema):post},minLength:function(schema,post){var limit=Number(schema.minLength);if("string"!==typeof post||isNaN(limit)||0>limit)return post;schema="";limit-=post.length;if(0<limit){for(var i=0;i<limit;i++)schema+="-";this.report();return post+schema}return post},maxLength:function(schema,post){schema=Number(schema.maxLength);return"string"!==typeof post||
isNaN(schema)||0>schema?post:post.length>schema?(this.report(),post.slice(0,schema)):post},properties:function(schema,post,callback){if("function"===typeof callback)return this.asyncProperties(schema,post,callback);if(!post||"object"!==typeof post)return post;callback=schema.properties;var i;if("undefined"!==typeof callback["*"])for(i in post)if(!(i in callback)){this._deeperObject(i);var tmp=this._sanitize(schema.properties["*"],post[i]);"undefined"!==typeof tmp&&(post[i]=tmp);this._back()}for(i in schema.properties)"*"!==
i&&(this._deeperObject(i),tmp=this._sanitize(schema.properties[i],post[i]),"undefined"!==typeof tmp&&(post[i]=tmp),this._back());return post},items:function(schema,post,callback){if("function"===typeof callback)return this.asyncItems(schema,post,callback);if(!(schema.items instanceof Object&&post instanceof Object))return post;var i;if(_typeIs.array(schema.items)&&_typeIs.array(post))for(callback=schema.items.length<post.length?schema.items.length:post.length,i=0;i<callback;i++)this._deeperArray(i),
post[i]=this._sanitize(schema.items[i],post[i]),this._back();else for(i in post)post.hasOwnProperty(i)&&(this._deeperArray(i),post[i]=this._sanitize(schema.items,post[i]),this._back());return post},exec:function(schema,post,callback){if("function"===typeof callback)return this.asyncExec(schema,post,callback);(_typeIs.array(schema.exec)?schema.exec:[schema.exec]).forEach(function(exec){"function"===typeof exec&&(post=exec.call(this,schema,post))},this);return post}};_extend(Sanitization.prototype,
_sanitizationAttribut);_extend(Sanitization.prototype,{asyncExec:function(schema,post,callback){var self=this,execs=_typeIs.array(schema.exec)?schema.exec:[schema.exec];JSCompiler_object_inline_async_2622.eachSeries(execs,function(exec,done){if("function"===typeof exec){if(2<exec.length)return exec.call(self,schema,post,function(err,res){if(err)return done(err);post=res;done()});post=exec.call(self,schema,post)}done()},function(err){callback(err,post)})},asyncProperties:function(schema,post,callback){if(!post||
"object"!==typeof post)return callback(null,post);var self=this,properties=schema.properties;JSCompiler_object_inline_async_2622.series([function(next$jscomp$0){if(null==properties["*"])return next$jscomp$0();var globing=properties["*"];JSCompiler_object_inline_async_2622.eachSeries(Object.keys(post),function(i,next){if(i in properties)return next();self._deeperObject(i);self._asyncSanitize(globing,post[i],function(err,res){"undefined"!==typeof res&&(post[i]=res);self._back();next()})},next$jscomp$0)},
function(next$jscomp$0){JSCompiler_object_inline_async_2622.eachSeries(Object.keys(properties),function(i,next){if("*"===i)return next();self._deeperObject(i);self._asyncSanitize(properties[i],post[i],function(err,res){if(err)return next(err);"undefined"!==typeof res&&(post[i]=res);self._back();next()})},next$jscomp$0)}],function(err){return callback(err,post)})},asyncItems:function(schema,post,callback){if(!(schema.items instanceof Object&&post instanceof Object))return callback(null,post);var self=
this,items=schema.items;_typeIs.array(items)&&_typeIs.array(post)?JSCompiler_object_inline_async_2622.timesSeries(items.length<post.length?items.length:post.length,function(i,next){self._deeperArray(i);self._asyncSanitize(items[i],post[i],function(err,res){if(err)return next(err);post[i]=res;self._back();next()})},function(err){callback(err,post)}):JSCompiler_object_inline_async_2622.eachSeries(Object.keys(post),function(key,next){self._deeperArray(key);self._asyncSanitize(items,post[key],function(err,
res){if(err)return next();post[key]=res;self._back();next()})},function(err){callback(err,post)});return post}});_extend(Sanitization,new Customisable);Sanitization.prototype.sanitize=function(post,callback){this.origin=post;if("function"===typeof callback){var self=this;return this._asyncSanitize(this._schema,post,function(err,data){self.origin=null;callback(err,self.result(data))})}post=this._sanitize(this._schema,post);this.origin=null;return this.result(post)};Sanitization.prototype._sanitize=
function(schema,post){this.userAlias=schema.alias||null;this._basicFields.forEach(function(i){(i in schema||"optional"===i)&&"function"===typeof this[i]&&(post=this[i](schema,post))},this);this._customFields.forEach(function(i){i in schema&&"function"===typeof this._custom[i]&&(post=this._custom[i].call(this,schema,post))},this);return post};Sanitization.prototype._asyncSanitize=function(schema,post,callback){var self=this;this.userAlias=schema.alias||null;JSCompiler_object_inline_async_2622.waterfall([function(next$jscomp$0){JSCompiler_object_inline_async_2622.reduce(self._basicFields,
post,function(value,i,next){JSCompiler_object_inline_async_2622.nextTick(function(){if((i in schema||"optional"===i)&&"function"===typeof self[i]){if(2<self[i].length)return self[i](schema,value,next);value=self[i](schema,value)}next(null,value)})},next$jscomp$0)},function(inter,next$jscomp$0){JSCompiler_object_inline_async_2622.reduce(self._customFields,inter,function(value,i,next){JSCompiler_object_inline_async_2622.nextTick(function(){if(i in schema&&"function"===typeof self._custom[i]){if(2<self._custom[i].length)return self._custom[i].call(self,
schema,value,next);value=self._custom[i].call(self,schema,value)}next(null,value)})},next$jscomp$0)}],callback)};var _rand={int:function(min,max){return min+(0|Math.random()*(max-min+1))},float:function(min,max){return Math.random()*(max-min)+min},bool:function(){return.5<Math.random()},char:function(min,max){return String.fromCharCode(this.int(min,max))},fromList:function(list){return list[this.int(0,list.length-1)]}},_formatSample={"date-time":function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().replace(/T.*$/,
"")},time:function(){return(new Date).toLocaleTimeString({},{hour12:!1})},color:function(min,max){var s="#";1>min&&(min=1);var i=0;for(min=_rand.int(min,max);i<min;i++)s+=_rand.fromList("0123456789abcdefABCDEF");return s},numeric:function(){return""+_rand.int(0,2147483647)},integer:function(){return!0===_rand.bool()?"-"+this.numeric():this.numeric()},decimal:function(){return this.integer()+"."+this.numeric()},alpha:function(min,max){var s="";1>min&&(min=1);var i=0;for(min=_rand.int(min,max);i<min;i++)s+=
_rand.fromList("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return s},alphaNumeric:function(min,max){var s="";1>min&&(min=1);var i=0;for(min=_rand.int(min,max);i<min;i++)s+=_rand.fromList("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");return s},alphaDash:function(min,max){var s="";1>min&&(min=1);var i=0;for(min=_rand.int(min,max);i<min;i++)s+=_rand.fromList("_-abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOPQRSTUVWXYZ_-0123456789_-");return s},javascript:function(min,max){var s=
_rand.fromList("_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$"),i=0;for(min=_rand.int(min,max-1);i<min;i++)s+=_rand.fromList("_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789_$");return s}},_typeGenerator={string:function(schema){if(null!=schema.eq)return schema.eq;var s="",minLength=null!=schema.minLength?schema.minLength:0,maxLength=null!=schema.maxLength?schema.maxLength:32;if("string"===typeof schema.pattern&&"function"===typeof _formatSample[schema.pattern])return _formatSample[schema.pattern](minLength,
maxLength);schema=null!=schema.exactLength?schema.exactLength:_rand.int(minLength,maxLength);for(minLength=0;minLength<schema;minLength++)s+=_rand.char(32,126);return s},number:function(schema){if(null!=schema.eq)return schema.eq;var limit=_getLimits(schema),n=_rand.float(limit.min,limit.max);if(null!=schema.ne)for(schema=_typeIs.array(schema.ne)?schema.ne:[schema.ne];-1!==schema.indexOf(n);)n=_rand.float(limit.min,limit.max);return n},integer:function(schema){if(null!=schema.eq)return schema.eq;
var limit=_getLimits(schema),n=_rand.int(limit.min,limit.max);if(null!=schema.ne)for(schema=_typeIs.array(schema.ne)?schema.ne:[schema.ne];-1!==schema.indexOf(n);)n=_rand.int(limit.min,limit.max);return n},boolean:function(schema){return null!=schema.eq?schema.eq:_rand.bool()},"null":function(schema){return null},date:function(schema){return null!=schema.eq?schema.eq:new Date},object:function(schema){var o={};schema=schema.properties||{};for(var key in schema)if(schema.hasOwnProperty(key)&&(!0!==
schema[key].optional||!0!==_rand.bool()))if("*"!==key)o[key]=this.generate(schema[key]);else for(var randomKey="__random_key_0",n=_rand.int(1,9),i=1;i<=n;i++)randomKey in schema||(o[randomKey]=this.generate(schema[key])),randomKey="__random_key_"+i;return o},array:function(schema){var items=schema.items||{},minLength=null!=schema.minLength?schema.minLength:0,maxLength=null!=schema.maxLength?schema.maxLength:16;if(_typeIs.array(items)){var size=items.length;null!=schema.exactLength?size=schema.exactLength:
size<minLength?size=minLength:size>maxLength&&(size=maxLength);minLength=Array(size);for(maxLength=0;maxLength<size;maxLength++)schema=items[maxLength].type||"any",_typeIs.array(schema)&&(schema=schema[_rand.int(0,schema.length-1)]),minLength[maxLength]=this[schema](items[maxLength])}else for(size=null!=schema.exactLength?schema.exactLength:_rand.int(minLength,maxLength),minLength=Array(size),schema=items.type||"any",_typeIs.array(schema)&&(schema=schema[_rand.int(0,schema.length-1)]),maxLength=0;maxLength<
size;maxLength++)minLength[maxLength]=this[schema](items);return minLength},any:function(schema){var fields=Object.keys(_typeGenerator);return this[fields[_rand.int(0,fields.length-2)]](schema)}};_extend(CandidateGenerator.prototype,_typeGenerator);var _instance=null;CandidateGenerator.instance=function(){_instance instanceof CandidateGenerator||(_instance=new CandidateGenerator);return _instance};CandidateGenerator.prototype.generate=function(schema){var type=schema.type||"any";_typeIs.array(type)&&
(type=type[_rand.int(0,type.length-1)]);return this[type](schema)};var SchemaInspector={};"undefined"!==typeof module&&module.exports?module.exports=SchemaInspector:window.SchemaInspector=SchemaInspector;SchemaInspector.newSanitization=function(schema,custom){return new Sanitization(schema,custom)};SchemaInspector.newValidation=function(schema,custom){return new Validation(schema,custom)};SchemaInspector.Validation=Validation;SchemaInspector.Sanitization=Sanitization;SchemaInspector.sanitize=function(schema,
post,custom,callback){3===arguments.length&&"function"===typeof custom&&(callback=custom,custom=null);return(new Sanitization(schema,custom)).sanitize(post,callback)};SchemaInspector.validate=function(schema,candidate,custom,callback){3===arguments.length&&"function"===typeof custom&&(callback=custom,custom=null);return(new Validation(schema,custom)).validate(candidate,callback)};SchemaInspector.generate=function(schema,n){if("number"===typeof n){for(var r=Array(n),i=0;i<n;i++)r[i]=CandidateGenerator.instance().generate(schema);
return r}return CandidateGenerator.instance().generate(schema)}})()}
//# sourceMappingURL=module$node_modules$schema_inspector$lib$schema_inspector.js.map
