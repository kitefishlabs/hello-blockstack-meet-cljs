shadow$provide.module$node_modules$cheerio$lib$api$manipulation=function(global,process,require,module,exports,shadow$shims){global=require("module$node_modules$cheerio$lib$parse");var $=require("module$node_modules$cheerio$lib$static"),updateDOM=global.update,evaluate=global.evaluate;global=require("module$node_modules$cheerio$lib$utils");var domEach=global.domEach,cloneDom=global.cloneDom,isHtml=global.isHtml,slice=Array.prototype.slice,_={flatten:require("module$node_modules$lodash_DOT_flatten$index"),
bind:require("module$node_modules$lodash_DOT_bind$index"),forEach:require("module$node_modules$lodash_DOT_foreach$index")};exports._makeDomArray=function(elem,clone){return null==elem?[]:elem.cheerio?clone?cloneDom(elem.get(),elem.options):elem.get():Array.isArray(elem)?_.flatten(elem.map(function(el){return this._makeDomArray(el,clone)},this)):"string"===typeof elem?evaluate(elem,this.options):clone?cloneDom([elem]):[elem]};require=function(concatenator){return function(){var elems=slice.call(arguments),
lastIdx=this.length-1;return domEach(this,function(i,el){var domSrc="function"===typeof elems[0]?elems[0].call(el,i,$.html(el.children)):elems;i=this._makeDomArray(domSrc,i<lastIdx);concatenator(i,el.children,el)})}};var uniqueSplice=function(array,spliceIdx,spliceCount,newElems,parent){spliceCount=[spliceIdx,spliceCount].concat(newElems);var prev=array[spliceIdx-1]||null,next=array[spliceIdx]||null,len,oldParent;var idx=0;for(len=newElems.length;idx<len;++idx){var node=newElems[idx];var prevIdx=
(oldParent=node.parent||node.root)&&oldParent.children.indexOf(newElems[idx]);oldParent&&-1<prevIdx&&(oldParent.children.splice(prevIdx,1),parent===oldParent&&spliceIdx>prevIdx&&spliceCount[0]--);node.root=null;node.parent=parent;node.prev&&(node.prev.next=node.next||null);node.next&&(node.next.prev=node.prev||null);node.prev=newElems[idx-1]||prev;node.next=newElems[idx+1]||next}prev&&(prev.next=newElems[0]);next&&(next.prev=newElems[newElems.length-1]);return array.splice.apply(array,spliceCount)};
exports.appendTo=function(target){target.cheerio||(target=this.constructor.call(this.constructor,target,null,this._originalRoot));target.append(this);return this};exports.prependTo=function(target){target.cheerio||(target=this.constructor.call(this.constructor,target,null,this._originalRoot));target.prepend(this);return this};exports.append=require(function(dom,children,parent){uniqueSplice(children,children.length,0,dom,parent)});exports.prepend=require(function(dom,children,parent){uniqueSplice(children,
0,0,dom,parent)});exports.wrap=function(wrapper){var wrapperFn="function"===typeof wrapper&&wrapper,lastIdx=this.length-1;_.forEach(this,_.bind(function(el,i){var parent=el.parent||el.root,siblings=parent.children;if(parent){wrapperFn&&(wrapper=wrapperFn.call(el,i));"string"!==typeof wrapper||isHtml(wrapper)||(wrapper=this.parents().last().find(wrapper).clone());i=this._makeDomArray(wrapper,i<lastIdx).slice(0,1);var index=siblings.indexOf(el);updateDOM([el],i[0]);uniqueSplice(siblings,index,0,i,parent)}},
this));return this};exports.after=function(){var elems=slice.call(arguments),lastIdx=this.length-1;domEach(this,function(i,el){var parent=el.parent||el.root;if(parent){var siblings=parent.children,index=siblings.indexOf(el);0>index||(el="function"===typeof elems[0]?elems[0].call(el,i,$.html(el.children)):elems,i=this._makeDomArray(el,i<lastIdx),uniqueSplice(siblings,index+1,0,i,parent))}});return this};exports.insertAfter=function(target){var clones=[],self=this;"string"===typeof target&&(target=
this.constructor.call(this.constructor,target,null,this._originalRoot));target=this._makeDomArray(target);self.remove();domEach(target,function(i,el){i=self._makeDomArray(self.clone());var parent=el.parent||el.root;if(parent){var siblings=parent.children;el=siblings.indexOf(el);0>el||(uniqueSplice(siblings,el+1,0,i,parent),clones.push(i))}});return this.constructor.call(this.constructor,this._makeDomArray(clones))};exports.before=function(){var elems=slice.call(arguments),lastIdx=this.length-1;domEach(this,
function(i,el){var parent=el.parent||el.root;if(parent){var siblings=parent.children,index=siblings.indexOf(el);0>index||(el="function"===typeof elems[0]?elems[0].call(el,i,$.html(el.children)):elems,i=this._makeDomArray(el,i<lastIdx),uniqueSplice(siblings,index,0,i,parent))}});return this};exports.insertBefore=function(target){var clones=[],self=this;"string"===typeof target&&(target=this.constructor.call(this.constructor,target,null,this._originalRoot));target=this._makeDomArray(target);self.remove();
domEach(target,function(i,el){i=self._makeDomArray(self.clone());var parent=el.parent||el.root;if(parent){var siblings=parent.children;el=siblings.indexOf(el);0>el||(uniqueSplice(siblings,el,0,i,parent),clones.push(i))}});return this.constructor.call(this.constructor,this._makeDomArray(clones))};exports.remove=function(selector){var elems=this;selector&&(elems=elems.filter(selector));domEach(elems,function(i,el){if(i=el.parent||el.root){i=i.children;var index=i.indexOf(el);0>index||(i.splice(index,
1),el.prev&&(el.prev.next=el.next),el.next&&(el.next.prev=el.prev),el.prev=el.next=el.parent=el.root=null)}});return this};exports.replaceWith=function(content){var self=this;domEach(this,function(i,el){var parent=el.parent||el.root;if(parent){var siblings=parent.children;i=self._makeDomArray("function"===typeof content?content.call(el,i,el):content);updateDOM(i,null);var index=siblings.indexOf(el);uniqueSplice(siblings,index,1,i,parent);el.parent=el.prev=el.next=el.root=null}});return this};exports.empty=
function(){domEach(this,function(i,el$jscomp$0){_.forEach(el$jscomp$0.children,function(el){el.next=el.prev=el.parent=null});el$jscomp$0.children.length=0});return this};exports.html=function(str){if(void 0===str)return this[0]&&this[0].children?$.html(this[0].children,this.options):null;var opts=this.options;domEach(this,function(i,el$jscomp$0){_.forEach(el$jscomp$0.children,function(el){el.next=el.prev=el.parent=null});i=str.cheerio?str.clone().get():evaluate(""+str,opts);updateDOM(i,el$jscomp$0)});
return this};exports.toString=function(){return $.html(this,this.options)};exports.text=function(str){if(void 0===str)return $.text(this);if("function"===typeof str)return domEach(this,function(i,el){var $el=[el];return exports.text.call($el,str.call(el,i,$.text($el)))});domEach(this,function(i,el$jscomp$0){_.forEach(el$jscomp$0.children,function(el){el.next=el.prev=el.parent=null});updateDOM({data:""+str,type:"text",parent:el$jscomp$0,prev:null,next:null,children:[]},el$jscomp$0)});return this};
exports.clone=function(){return this._make(cloneDom(this.get(),this.options))}}
//# sourceMappingURL=module$node_modules$cheerio$lib$api$manipulation.js.map
