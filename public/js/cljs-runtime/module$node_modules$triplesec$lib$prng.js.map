{
"version":3,
"file":"module$node_modules$triplesec$lib$prng.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/triplesec/lib/prng.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$triplesec$lib$prng\"] = function(global,process,require,module,exports,shadow$shims) {\n// Generated by IcedCoffeeScript 108.0.8\n(function() {\n  var ADRBG, PRNG, WordArray, XOR, browser_rng, e, generate, iced, m, more_entropy, native_rng, rng, util, __iced_k, __iced_k_noop, _browser_rng_primitive, _native_rng, _prng, _ref, _ref1;\n\n  iced = require('iced-runtime');\n  __iced_k = __iced_k_noop = function() {};\n\n  more_entropy = require('more-entropy');\n\n  ADRBG = require('./drbg').ADRBG;\n\n  WordArray = require('./wordarray').WordArray;\n\n  XOR = require('./combine').XOR;\n\n  util = require('./util');\n\n  _browser_rng_primitive = null;\n\n  browser_rng = function(n) {\n    var v;\n    v = new Uint8Array(n);\n    _browser_rng_primitive(v);\n    return new Buffer(v);\n  };\n\n  _browser_rng_primitive = (m = typeof window !== \"undefined\" && window !== null ? (_ref = window.crypto) != null ? _ref.getRandomValues : void 0 : void 0) != null ? m.bind(window.crypto) : (m = typeof window !== \"undefined\" && window !== null ? (_ref1 = window.msCrypto) != null ? _ref1.getRandomValues : void 0 : void 0) != null ? m.bind(window.msCrypto) : null;\n\n  if (_browser_rng_primitive != null) {\n    _native_rng = browser_rng;\n  } else {\n    try {\n      rng = require('cry' + 'pto').rng;\n      if (rng != null) {\n        _native_rng = rng;\n      }\n    } catch (_error) {\n      e = _error;\n    }\n  }\n\n  native_rng = function(x) {\n    if (_native_rng == null) {\n      throw new Error('No rng found; tried requiring \"crypto\" and window.crypto');\n    }\n    return _native_rng(x);\n  };\n\n  PRNG = (function() {\n    function PRNG() {\n      this.meg = new more_entropy.Generator();\n      this.adrbg = new ADRBG(((function(_this) {\n        return function(n, cb) {\n          return _this.gen_seed(n, cb);\n        };\n      })(this)), XOR.sign);\n    }\n\n    PRNG.prototype.now_to_buffer = function() {\n      var buf, d, ms, s;\n      d = Date.now();\n      ms = d % 1000;\n      s = Math.floor(d / 1000);\n      buf = new Buffer(8);\n      buf.writeUInt32BE(s, 0);\n      buf.writeUInt32BE(ms, 4);\n      return buf;\n    };\n\n    PRNG.prototype.gen_seed = function(nbits, cb) {\n      var b, bufs, cat, nbytes, wa, words, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      nbytes = nbits / 8;\n      bufs = [];\n      bufs.push(this.now_to_buffer());\n      (function(_this) {\n        return (function(__iced_k) {\n          __iced_deferrals = new iced.Deferrals(__iced_k, {\n            parent: ___iced_passed_deferral,\n            filename: \"/Users/max/src/keybase/triplesec/src/prng.iced\",\n            funcname: \"PRNG.gen_seed\"\n          });\n          _this.meg.generate(nbits, __iced_deferrals.defer({\n            assign_fn: (function() {\n              return function() {\n                return words = arguments[0];\n              };\n            })(),\n            lineno: 83\n          }));\n          __iced_deferrals._fulfill();\n        });\n      })(this)((function(_this) {\n        return function() {\n          var _i, _len;\n          bufs.push(_this.now_to_buffer());\n          bufs.push(new Buffer(words));\n          bufs.push(native_rng(nbytes));\n          bufs.push(_this.now_to_buffer());\n          cat = Buffer.concat(bufs);\n          wa = WordArray.from_buffer(cat);\n          util.scrub_buffer(cat);\n          for (_i = 0, _len = bufs.length; _i < _len; _i++) {\n            b = bufs[_i];\n            util.scrub_buffer(b);\n          }\n          return cb(wa);\n        };\n      })(this));\n    };\n\n    PRNG.prototype.generate = function(n, cb) {\n      return this.adrbg.generate(n, cb);\n    };\n\n    return PRNG;\n\n  })();\n\n  _prng = null;\n\n  generate = function(n, cb) {\n    if (_prng == null) {\n      _prng = new PRNG();\n    }\n    return _prng.generate(n, cb);\n  };\n\n  exports.PRNG = PRNG;\n\n  exports.generate = generate;\n\n  exports.native_rng = native_rng;\n\n}).call(this);\n\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","m","_ref","_ref1","iced","more_entropy","ADRBG","WordArray","XOR","util","_browser_rng_primitive","browser_rng","n","v","Uint8Array","Buffer","window","crypto","getRandomValues","bind","msCrypto","_native_rng","rng","_error","native_rng","x","Error","PRNG","meg","Generator","adrbg","_this","cb","gen_seed","sign","prototype","now_to_buffer","PRNG.prototype.now_to_buffer","d","Date","now","ms","s","Math","floor","buf","writeUInt32BE","PRNG.prototype.gen_seed","nbits","b","cat","wa","words","__iced_deferrals","___iced_passed_deferral","findDeferral","arguments","nbytes","bufs","push","__iced_k","Deferrals","parent","filename","funcname","generate","defer","assign_fn","lineno","_fulfill","_len","concat","from_buffer","scrub_buffer","_i","length","PRNG.prototype.generate","_prng","call"]
}
